package ru.geekbrains.spring.ishop.rest.deserializers;

import lombok.Getter;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import ru.geekbrains.spring.ishop.rest.deserializers.interfaces.IEntityBuilder;
import ru.geekbrains.spring.ishop.rest.deserializers.interfaces.IEventBuilder;
import ru.geekbrains.spring.ishop.utils.EntityTypes;

import java.util.HashMap;
import java.util.Map;

@Service
@Getter
public class DeserializerFabric {
//    private final Map<String, IEntityBuilder<?>> deserializerMap;
    private final Map<String, IEntityBuilder> deserializerMap;
    private final IEventBuilder eventBuilder;

    @Autowired
    public DeserializerFabric(IEventBuilder eventBuilder) {
        this.eventBuilder = eventBuilder;
        //TODO наполнить мапу автоматически из пакета deserializers/interfaces
        deserializerMap = new HashMap<>();
        deserializerMap.put(EntityTypes.Event.name(), eventBuilder);

    }

//    public IEntityBuilder<?> getDeserializer(String entityType) {
//        return deserializerMap.get(entityType);
//    }
    public IEntityBuilder getDeserializer(String entityType) {
        return deserializerMap.get(entityType);
    }

}
