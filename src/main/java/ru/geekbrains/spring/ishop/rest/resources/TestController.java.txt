package ru.geekbrains.spring.ishop.rest.resources;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import ru.geekbrains.spring.ishop.entity.Event;

import javax.validation.Valid;
import java.time.LocalDateTime;

@RestController
@RequestMapping("/api2/v1/test")
//@CrossOrigin
public class TestController {
    Logger log = LoggerFactory.getLogger(this.getClass());

    @GetMapping(path = "/LocalDateTime/now", produces = MediaType.APPLICATION_JSON_VALUE)
    public LocalDateTime getNowLocalDateTime() {
        return LocalDateTime.now();
    }


    @PutMapping(value = "/LocalDateTime/update")
    public ResponseEntity<Event> getUpdateLocalDateTime(
            @RequestBody @Valid LocalDateTime serverAcceptedAt) {

        log.info("LocalDateTime= " + serverAcceptedAt);

        Event event = new Event();
//        event.setServerAcceptedAt(LocalDateTime.parse("" + localDateTime));//тоже работает
        event.setServerAcceptedAt(serverAcceptedAt);

        return ResponseEntity.ok().contentType(MediaType.APPLICATION_JSON)
                .body(event);
    }


}
